# 서울시 날씨, 대기오염, 교통사고 데이터 EDA 보고서

이 보고서는 1994년부터 2021년까지의 서울시 날씨 데이터, 1988년부터 2021년까지의 서울시 대기오염 데이터, 그리고 2017년부터 2019년까지의 서울시 교통사고 데이터를 분석하여 각 데이터셋의 특징을 파악하고, 데이터 간의 연관성을 탐색합니다.

## 1. 데이터 임포트 및 전처리

*   **사용 라이브러리**: `numpy`, `pandas`, `matplotlib`, `seaborn`
*   **데이터 소스**: Kaggle ([날씨](https://www.kaggle.com/datasets/alfredkondoro/seoul-historical-weather-data-2024), [대기오염](https://www.kaggle.com/datasets/williamhyun/seoulairqualityhistoricdata), [교통사고](https://www.kaggle.com/datasets/seventyfivebyte/seoul-daily-hourly-traffic-accident-status))
*   **공통 전처리**: 모든 데이터프레임에 `day_of_year` (연중 일수) 및 `weekday` (요일) 컬럼을 추가하여 날짜 기반 분석을 용이하게 합니다.

## 2. Weather 데이터 분석 (1994-2021)

### 2.1. 연도별 기온 추세

*   **분석**: 연도별 평균 기온 라인 플롯, 연도별 기온 분포 박스 플롯
*   **결과**: 
    *   1994-2021년 평균 기온은 11.6℃ ~ 13.8℃ 사이로 비교적 안정적입니다.
    *   2013년 이후 평균 기온이 점진적으로 상승하는 추세이며, 2014-2021년 기간은 이전보다 높은 평균을 유지합니다. 특히 2019-2021년은 최고 수준을 기록했습니다.
    *   연도별 기온 분포의 중앙값이 2013년 이후 약간 위로 이동하여 평균 상승 경향과 일치합니다. 계절 변동 폭 자체는 큰 변화가 없습니다.

### 2.2. 월별 계절성 및 상관 관계

*   **분석**: 월별 평균 기온 히트맵, 주요 날씨 변수 상관 히트맵, 기온-기압/습도-가시성 산점도, 흐린 정도에 따른 기온 분포 박스 플롯
*   **결과**: 
    *   월별 평균 기온 히트맵을 통해 지난 30년간의 계절적 패턴과 특정 시기(특히 여름철)의 기온 상승 추세를 확인했습니다.
    *   기온이 높을수록 해수면 기압은 낮아지는 음의 상관 관계를 보입니다.
    *   습도가 증가할수록 가시성은 감소하는 음의 상관 관계를 보입니다.
    *   흐린 정도(`cloudy`)에 따라 기온 분포의 차이가 존재합니다.
    *   월별 평균 기온 라인 플롯을 통해 명확한 계절성 패턴을 확인했습니다.

## 3. Pollution 데이터 분석 (2000년 2월 이후)

### 3.1. PM2.5 결측치 처리 및 레벨 분류

*   **처리**: 2000년 2월 이후 데이터(`pol_df_n`)에서 `pm2.5` 컬럼의 결측치를 월별 평균으로 채웁니다.
*   **분류**: `pm2.5` 농도를 기준으로 '좋음'(0), '보통'(1), '나쁨'(2), '매우나쁨'(3)의 4단계 `pm2.5_level`을 생성하고 숫자로 인코딩합니다.

### 3.2. 월별 미세먼지 레벨 분포

*   **분석**: 월별 PM10 및 PM2.5 레벨 분포 비율 스택형 막대 그래프
*   **결과**: 
    *   2월이 미세먼지 레벨 '나쁨' 이상 비율이 가장 높고, 8월이 가장 낮습니다.
    *   이는 **계절성 오염 물질**의 특징을 보여주며, 겨울철 난방 연소 증가, 대기 정체, 봄철 황사 유입, 여름철 강수에 의한 세정 효과 및 대기 혼합 활발 등이 주요 원인입니다.

### 3.3. 연도별 대기 오염 물질 추세

*   **분석**: 연도별 PM10 및 PM2.5 평균 농도 라인 플롯, 연도별 SO₂, NO₂, CO, O₃ 평균 농도 개별 라인 플롯
*   **결과**: 
    *   최근 들어 PM10 및 PM2.5 농도가 지속적으로 감소하는 추세를 보입니다. 이는 국내 배출 규제 강화, 연료 변화(청정화), 미세먼지 특별법 등 정책 강화, 그리고 코로나19(2020-2021)로 인한 산업 활동 및 교통량 감소의 복합적인 영향으로 해석됩니다.
    *   SO₂, NO₂, CO는 전반적으로 감소 추세를 보이는 반면, O₃는 장기적으로 증가 추세를 보입니다. 이는 NOx 감소로 인한 광화학 반응 변화와 기온 상승 등의 기상 영향이 복합적으로 작용한 결과로 보입니다.

### 3.4. 오염 물질 간 상관 관계

*   **분석**: 오염 물질 레벨 간 상관 히트맵
*   **결과**: 
    *   PM10과 PM2.5는 강하게 연관된 군집 구조를 가집니다.
    *   NO₂는 미세먼지 상승과 함께 증가하는 주요 연소 지표이며, 2차 생성 미세먼지의 전구물질로 작용합니다.
    *   오존(O₃)은 미세먼지와 독립적인 계절성 오염물질입니다.

## 4. Accident 데이터 분석 (2017-2019)

### 4.1. 요일별 사고 특성

*   **분석**: 요일별 사고 건수, 사망자, 치명상, 부상자 집계, 요일별 사망자 비율 막대 그래프 (2017, 2018, 2019년)
*   **결과**: 
    *   전반적으로 요일에 따라 사고 발생 건수 및 사망자 수에 차이가 있습니다.
    *   2017년에는 월요일에 사망자 비율이 높았으나, 2019년에는 화요일에 가장 높은 사망자 비율을 보였습니다. 요일별 사망자 비율은 연도마다 다소 변동성이 있습니다.

### 4.2. 연도별 사고 심각도 및 사망 위험도

*   **분석**: 연도별 사고 심각도(사망, 치명상, 부상) 비율 스택형 막대 그래프, 연도별 사고 1건당 사망 위험도 라인/막대 그래프
*   **결과**: 
    *   사고 1건당 사망 위험도(`death_per_accident`)는 2017년부터 2019년까지 감소하는 추세를 보입니다 (2017: 0.0089, 2018: 0.0078, 2019: 0.0064).
    *   월별 사망 위험도 또한 연도별로 변동성이 있으나, 전반적으로 감소 추세를 유지합니다.

## 5. 연관 데이터 분석 (날씨, 오염, 사고)

### 5.1. 데이터 병합

*   **방법**: 날씨, 대기 오염, 교통사고 데이터를 'year', 'month', 'day' 키를 기준으로 내부 조인(`inner merge`)하여 `df_merged` 데이터프레임을 생성합니다.

### 5.2. 데이터 간 상관 관계

*   **분석**: 날씨-오염, 날씨-사고, 오염-사고 변수 간 상관 히트맵
*   **결과**: 
    *   **날씨-오염**: 
        *   기온(`temp`)과 오염원(SO₂, NO₂, CO, PM10, PM2.5) 간에 0.2~0.5의 양의 상관 관계를 보입니다.
        *   강수량(`precip`)은 O₃를 제외한 다른 오염원과 낮은 음의 상관 관계를 보였습니다.
        *   태양 복사량(`solarradiation`)은 O₃와 매우 높은 양의 상관 관계를 보이며, 이는 O₃가 태양광에 의해 생성되는 2차 오염물질임을 뒷받침합니다.
    *   **날씨-사고**: 
        *   강수량(`precip`), 강설량(`snow`) 등은 사고 건수 및 사망률에 낮은 상관 관계를 보였습니다.
        *   기온(`temp`)과 습도(`humidity`)가 사망률(`death_rate(%)`)과 비교적 높은 상관 관계를 보입니다. 노면의 젖음 유무와 같은 추가적인 분석이 필요할 수 있습니다.
    *   **공해-사고**: 
        *   SO₂, CO, PM10, PM2.5 등 대기 오염 물질은 사고 건수(`accident_cnt`), 부상자 수(`injured`), 치명상률(`fatal_rate`)과 낮은 연관성을 보였습니다.

### 5.3. 특정 관계 산점도

*   **분석**: 태양 복사량-오존, 강수/강설 조건에 따른 사고 건수-사망률, PM10-사고 건수, PM2.5-사고 건수 산점도
*   **결과**: 
    *   태양 복사량과 오존은 명확한 양의 상관 관계를 보여, 오존 생성 메커니즘을 시각적으로 확인했습니다.
    *   강수/강설 조건과 사고 건수 및 사망률 간의 명확한 연관성은 찾기 어려웠습니다.
    *   PM10/PM2.5 농도와 사고 건수 간에도 뚜렷한 선형적 상관 관계는 나타나지 않았습니다.

## 결론

이 EDA를 통해 서울시의 날씨, 대기 오염, 교통사고 데이터에 대한 개별적인 특성과 시간적 추이를 이해할 수 있었습니다. 특히 대기 오염 물질의 계절성과 연도별 감소 추세, 교통사고 사망률의 감소 경향을 확인했습니다. 데이터 간의 연관성 분석에서는 기온과 대기 오염, 태양 복사량과 오존 간의 의미 있는 상관 관계를 발견했으나, 날씨 및 대기 오염과 교통사고 간의 직접적인 강력한 선형적 관계는 뚜렷하게 나타나지 않았습니다. 향후 분석에서는 비선형적 관계나 복합적인 상호작용에 대한 탐색이 필요할 수 있습니다.